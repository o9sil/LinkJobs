<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>getAnnouncementOne</title>
<!-- Custom fonts for this template -->
<link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

<!-- Custom styles for this template -->
<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

<!-- Custom styles for this page -->
<link th:href="@{/vendor/datatables/dataTables.bootstrap4.min.css}" rel="stylesheet">

<script th:src="@{/js/html2canvas.js}"></script>
<script th:src="@{/js/jspdf.min.js}"></script>

</head>

<body id="page-top">
<!-- Page Wrapper -->
<div id="wrapper">

	<!-- SideBar -->
	<ul th:include="/include/menuSide::navSide" class="navbar-nav bg-gradient-info sidebar sidebar-dark accordion" id="accordionSidebar">
	</ul>
	

	<!-- Content Wrapper -->
	<div id="content-wrapper" class="d-flex flex-column">
		<div th:include="/include/menuTop::navTop"></div>
		<!-- Main Content -->
		<div id="content">		
			<div class="container-fluid">				
				<button type="button" class="btn btn-primary" id="savePdf" style="margin-bottom: 2em;">PDF 저장</button>
				<div class="row" id="pdfDiv">
					<div class="col-xl-12 col-md-12 mb-4">
						<div class="card border-left-info h-100 py-2">
							<div class="card-body">
								<div class="row no-gutters align-items-center">
									
								
									<div class="col mr-2">
										<div id="companyName" th:text="${hireAnnouncement.company}"></div>
										<h2 th:text="${hireAnnouncement.title}" id="announcementTitle"></h2>
										
										
										
										<hr>
										<div class="row">
											<div class="col-xl-6 col-md-6 mb-4">
												<div>
													경력 :
													<span th:text="${hireAnnouncement.career}"></span>
												</div>
												<div>
													학력 : 
													<span th:text="${hireAnnouncement.education}"></span>
												</div>
												<div>
													근무형태 : 
													<span th:text="${hireAnnouncement.workingFormName}"></span>
												</div>
											</div>
											<div class="col-xl-6 col-md-6 mb-4">
												<div>
													급여 :
													<span th:text="${hireAnnouncement.salary}"></span>
												</div>
												<div>
													직급/직책 :
													<span th:text="${hireAnnouncement.job}"></span>
												</div>
												<div>
													근무부서 :
													<span th:text="${hireAnnouncement.department}"></span>
												</div>
												<div>
													근무지역 :
													<span th:text="|${hireAnnouncement.area} ${hireAnnouncement.address}|"></span>
												</div>
											</div>										
										</div>
										<hr>
										
										<h3>모집부문 및 자격요건</h3>
										
										<h5>모집분야</h5>
										<div>
											근무부서 :
											<span th:text="${hireAnnouncement.department}"></span>											
										</div>
										<div>
											우대조건 :
											<span th:text="${hireAnnouncement.preferentialConditions}"></span>											
										</div>
										<div>
											대표직무 :
											<span th:text="${hireAnnouncement.mainJob}"></span>											
										</div>
										
										<h5>근무조건</h5>
										<div>
											근무형태 :
											<span th:text="${hireAnnouncement.workingFormName}"></span>										
										</div>
										<div>
											연봉/급여 :
											<span th:text="${hireAnnouncement.salary}"></span>										
										</div>
										<div>
											근무지역 :
											<span id="areaAddress" th:text="|${hireAnnouncement.area} ${hireAnnouncement.address}|"></span>											
										</div>
										
										<h5>상세내용</h5>
										<div>											
											<span th:text="${hireAnnouncement.contents}"></span>											
										</div>
										
										<hr>
										
										<h3>접수기간 및 방법</h3>
										<div>				
											기간 : 							
											<span th:text="|${hireAnnouncement.startDate} ~ ${hireAnnouncement.endDate}"></span>											
										</div>
										<div>				
											접수방법 : 							
											<span>LinkJobs 입사지원</span>											
										</div>
										<div>				
											이력서 양식 : 							
											<span>LinkJobs 온라인 이력서</span>											
										</div>
										
										<hr>
										<h3>유의사항</h3>
										<div>
											<span>*입사지원 서류에 허위사실이 발견될 경우, 채용확정 이후에도 채용이 취소될 수 있습니다.</span>
										</div>
										
										<hr>
										
										<h3>기업정보</h3>
										<div class="row">
											<div class="col-xl-6 col-md-6 mb-4">
												<div id="map" style="width:100%;height:400px;"></div>
											</div>
											<div class="col-xl-6 col-md-6 mb-4">
												<img th:src="@{${'/img/' + hireAnnouncement.pic}}" alt="My Image" height="250px">
												<h5 th:text="${hireAnnouncement.company}"></h5>
												<div>
													사원수 : 
													<span th:text="${hireAnnouncement.numEmployees}"></span> 
												</div>
												<div>
													대표자명 : 
													<span th:text="${hireAnnouncement.ceo}"></span> 
												</div>
												<div>
													업종 : 
													<span th:text="${hireAnnouncement.industry}"></span> 
												</div>
												<div>
													설립일 : 
													<span th:text="${hireAnnouncement.establishDate}"></span> 
												</div>
												<div>
													주소 : 
													<span th:text="|${hireAnnouncement.area} ${hireAnnouncement.address}|"></span>
												</div>
											</div>
											
										</div>										
										
										
										
									</div>
									
								</div>
							
							
							</div>
						</div>
					</div>		
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Bootstrap core JavaScript-->
<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

<!-- Core plugin JavaScript-->
<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

<!-- Custom scripts for all pages-->
<script th:src="@{/js/sb-admin-2.min.js}"></script>

<!-- Page level plugins -->
<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
<script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>

<!-- Page level custom scripts -->
<script th:src="@{/js/demo/datatables-demo.js}"></script>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=33cadc92575b7002fea76508c67dbad0&libraries=services,clusterer,drawing"></script>
<script>

var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new kakao.maps.Map(mapContainer, mapOption); 

// 주소-좌표 변환 객체를 생성합니다
var geocoder = new kakao.maps.services.Geocoder();



// 주소로 좌표를 검색합니다
geocoder.addressSearch($('#areaAddress').text(), function(result, status) {

    // 정상적으로 검색이 완료됐으면 
     if (status === kakao.maps.services.Status.OK) {

        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new kakao.maps.Marker({
            map: map,
            position: coords
        });

        // 인포윈도우로 장소에 대한 설명을 표시합니다
        var infowindow = new kakao.maps.InfoWindow({
            content: '<div style="width:150px;text-align:center;padding:6px 0;">' + $('#companyName').text() + '</div>'
        });
        infowindow.open(map, marker);

        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
    } 
});    


$('#savePdf').click(function() { // pdf저장 button id
	
    html2canvas($('#pdfDiv')[0]).then(function(canvas) { //저장 영역 div id
	
    // 캔버스를 이미지로 변환
    var imgData = canvas.toDataURL('image/png');
	     
    var imgWidth = 190; // 이미지 가로 길이(mm) / A4 기준 210mm
    var pageHeight = imgWidth * 1.414;  // 출력 페이지 세로 길이 계산 A4 기준
    var imgHeight = canvas.height * imgWidth / canvas.width;
    var heightLeft = imgHeight;
    var margin = 10; // 출력 페이지 여백설정
    var doc = new jsPDF('p', 'mm');
    var position = 10;
       
    // 첫 페이지 출력
    doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
    heightLeft -= pageHeight;
         
    // 한 페이지 이상일 경우 루프 돌면서 출력
    while (heightLeft >= 20) {
        position = heightLeft - imgHeight;
        doc.addPage();
        doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;
    }
 
    // 파일 저장
    doc.save($('#announcementTitle').text() + '_채용공고.pdf');

	  
});

});

</script>

</body>

</html>
